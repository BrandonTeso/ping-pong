<html>
some text here
<canvas id="game" width="800" height="600"></canvas>
<script>
    //canvas, ball, speed, playerscore, paddle, paddle sizes, winning score and screen
   var mainCanvas;
   var canvasType;
   var ballHorizontal = 50;
   var ballVertical = 50;
   var ballSpeedHorizontal = 10;
   var ballSpeedVertical = 4;

   var player1Score = 0;
   var player2Score = 0;

   var paddle1Vertical = 250;
   var paddle2Vertical = 250;

   const PADDLE_HEIGHT = 100;
   const PADDLE_THICK = 10;
   const WINNING_POINT = 3;
   
   var winnerScreen = false;
//calculate the mouse position of x and y
   function trackMouse(evt){
            var rect = mainCanvas.getBoundingClientRect();
            var root = document.documentElement;
            var mouseX = evt.clientX - rect.left - root.scrollLeft;
            var mouseY = evt.clientY - rect.top - root.scrollTop;
            return{
                x: mouseX,
                y: mouseY
            }
   }
      
    //click to reset game
  function startNewGame(evt){
      if(winnerScreen){
          player1Score = 0;
          player2Score = 0;
          winnerScreen = false;
      }
  }
//loads canvas, runs interval, calls functions
   window.onload = function(){
       mainCanvas = document.getElementById("game");
       canvasType = mainCanvas.getContext('2d');
  
        //runs interval every 1000 milleseconds
       let framesPerSecond = 30;
       setInterval(function(){
           drawEverything();
           moveEverything()
       },1000/framesPerSecond);

       //event listeners
       mainCanvas.addEventListener("mousedown",startNewGame);
       mainCanvas.addEventListener("mousemove",
       function(evt){
           var mousePosition = trackMouse(evt);
           paddle1Vertical = mousePosition.y-(PADDLE_HEIGHT/2);
       });
   }
//reset ball
    function resetBall(){
        if(player1Score >= WINNING_POINT || player2Score >= WINNING_POINT){
            winnerScreen = true;
        }
        ballSpeedHorizontal = -ballSpeedHorizontal;
        ballHorizontal = mainCanvas.width/2;
        ballVertical = mainCanvas.height/2
    }

//computer AI
function AIPaddle(){
    var paddle2VerticalCenter = paddle2Vertical + (PADDLE_HEIGHT/2);
    if(paddle2VerticalCenter < ballVertical-35){
        paddle2Vertical += 6;
    }else if(paddle2VerticalCenter > ballVertical+35){
        paddle2Vertical -= 6;
    }
}
   //moves ball across canvas and bounces back
   //START
   function moveEverything(){
            if(winnerScreen){
                return;
            }
    
            AIPaddle();
        ballHorizontal += ballSpeedHorizontal;
        ballVertical += ballSpeedVertical;
    
        if(ballHorizontal < 0) {
            if(ballVertical > paddle1Vertical &&
                    ballVertical < paddle1Vertical+PADDLE_HEIGHT){
                ballSpeedHorizontal = -ballSpeedHorizontal;
                
                var deltaY = ballVertical
                            -(paddle1Vertical+PADDLE_HEIGHT/2);
                            ballSpeedVertical = deltaY * 0.35;
            }else{
                player2Score+= 1; //must be before ball reset
                resetBall();
            }
        
        }
        if(ballHorizontal > mainCanvas.width){
           if(ballVertical > paddle2Vertical &&
           ballVertical < paddle2Vertical+PADDLE_HEIGHT){
            ballSpeedHorizontal = -ballSpeedHorizontal;
    
            var deltaY = ballVertical
                            -(paddle2Vertical+PADDLE_HEIGHT/2);
                            ballSpeedVertical = deltaY * 0.35;
    
           }else{
               player1Score++; //must be before ball reset
               resetBall();
           }
        }
        if(ballVertical < 0) {
            ballSpeedVertical = -ballSpeedVertical;
        }
        if(ballVertical > mainCanvas.height){
            ballSpeedVertical = -ballSpeedVertical;
        }
        }
    
//canvas drawing

    

  function drawEverything(){
  
        //black box
       drawRect(0,0,mainCanvas.width,mainCanvas.height,'black');
    //if Win Screen is on
        if(winnerScreen){
            canvasType.fillStyle = "white";
        
        if(player1Score >= WINNING_POINT){
            canvasType.fillText("Player 1: Winner!",350,200);
        }else if(player2Score >= WINNING_POINT){
            canvasType.fillText("Player 2: Winner!",350,200);
        }
        canvasType.fillText("Click to Play Again!",350,500);
        return;
    }
    
        //left paddle
       drawRect(0,paddle1Vertical,PADDLE_THICK,PADDLE_HEIGHT,'lightgreen');
        //right paddle
       drawRect(mainCanvas.width-PADDLE_THICK,paddle2Vertical,PADDLE_THICK,PADDLE_HEIGHT,'red');
       //net
       for(i = 0; i < mainCanvas.height; i+= 40){
        drawRect(mainCanvas.width/2-1,i,2,20,'white');
    }
        //score board
       canvasType.fillText(player1Score,100,100);
       canvasType.fillText(player2Score,mainCanvas.width-100,100);
        //ball
        drawBall(ballHorizontal,ballVertical,10,"grey");
    //variables for ball
   function drawBall(positionX,positionY,radius,drawColor){
    canvasType.fillStyle = drawColor;
       canvasType.beginPath();
       canvasType.arc(positionX,positionY,radius, 0,Math.PI*2,true)
       canvasType.fill();
   }
    //variables for paddle and background
    function drawRect(positionX,positionY,width,height,drawColor){
        canvasType.fillStyle = drawColor;
        canvasType.fillRect(positionX,positionY,width,height);
    }
  }
</script>
</html>